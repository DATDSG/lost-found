# ================================================================
# NLP Service - Environment Configuration
# ================================================================
# For standalone development or Docker Compose
# ================================================================

# ========== MODEL CONFIGURATION ==========
MODEL_NAME=sentence-transformers/all-MiniLM-L6-v2
# Alternative: intfloat/e5-small-v2, paraphrase-multilingual-mpnet-base-v2

# ========== REDIS CACHE ==========
REDIS_URL=redis://redis:6379/0
REDIS_CACHE_TTL=86400
ENABLE_REDIS_CACHE=true

# ========== GPU CONFIGURATION ==========
USE_GPU=false
GPU_DEVICE_ID=0
GPU_MEMORY_FRACTION=0.8

# ========== CACHE CONFIGURATION ==========
LRU_CACHE_SIZE=1000
CACHE_EVICTION_POLICY=lru

# ========== PERFORMANCE ==========
BATCH_SIZE=32
MAX_TOKENS=512
NUM_WORKERS=4

# ========== LOGGING ==========
LOG_LEVEL=INFO
# Options: DEBUG, INFO, WARNING, ERROR, CRITICAL

# ========== SERVER ==========
HOST=0.0.0.0
PORT=8001


# ========================================
# Performance Tuning
# ========================================
BATCH_SIZE=32
MAX_SEQUENCE_LENGTH=512
NORMALIZE_EMBEDDINGS=true
TORCH_NUM_THREADS=4
WORKERS=1

# ========================================
# Monitoring & Metrics
# ========================================
ENABLE_METRICS=true
METRICS_PORT=9090
ENABLE_ANALYTICS=true
ANALYTICS_SAMPLE_RATE=0.1

# ========================================
# Rate Limiting
# ========================================
ENABLE_RATE_LIMIT=true
RATE_LIMIT_ENCODE=100/minute
RATE_LIMIT_BATCH=50/minute
RATE_LIMIT_STORAGE=redis

# ========================================
# Model Versioning & A/B Testing
# ========================================
ENABLE_MODEL_VERSIONING=true
DEFAULT_MODEL_VERSION=v1
AB_TEST_ENABLED=false
AB_TEST_V2_TRAFFIC=0.1

# ========================================
# Async Processing
# ========================================
ENABLE_ASYNC_PROCESSING=true
BACKGROUND_WORKER_COUNT=2

# ========================================
# Cache Pre-warming
# ========================================
ENABLE_CACHE_PREWARMING=false
# PREWARM_TEXTS_FILE=/app/common_texts.txt

# ========================================
# Security (Optional)
# ========================================
API_KEY_ENABLED=false
# API_KEYS=key1,key2,key3

# ========================================
# Logging
# ========================================
LOG_LEVEL=INFO
ENVIRONMENT=production

# ========================================
# Grafana Configuration
# ========================================
GRAFANA_USER=admin
GRAFANA_PASSWORD=admin

# ========================================
# Resource Limits (for Docker Compose)
# ========================================
CPU_LIMIT=2
MEMORY_LIMIT=4G
