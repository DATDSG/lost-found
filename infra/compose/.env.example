# ================================================================
# Lost & Found - Docker Compose Environment Configuration
# ================================================================
# PRIMARY configuration file for Docker Compose deployment
# Copy this to .env and customize for your environment
# ================================================================

# ========== POSTGRESQL DATABASE (Keep as-is) ==========
POSTGRES_USER=postgres
POSTGRES_PASSWORD=postgres
POSTGRES_DB=lostfound
POSTGRES_HOST=host.docker.internal
POSTGRES_PORT=5432
DATABASE_URL=postgresql+psycopg://postgres:postgres@host.docker.internal:5432/lostfound

# ========== REDIS CACHE ==========
REDIS_HOST=redis
REDIS_PORT=6379
REDIS_PASSWORD=LF_Redis_2025_Pass!
REDIS_DB=0
REDIS_URL=redis://:LF_Redis_2025_Pass!@redis:6379/0

# ========== JWT AUTHENTICATION ==========
# SECURITY: Generate with: openssl rand -hex 32
# PowerShell: -join ((48..57) + (97..122) | Get-Random -Count 64 | ForEach-Object {[char]$_})
JWT_SECRET=a7f9e2b8c4d1f6a3e8b2c7d9f4e1a6b3c8d2e7f1a4b9c3d8e2f7a1b6c4d9e3f8
JWT_ALGORITHM=HS256
ACCESS_TTL_MIN=60
REFRESH_TTL_DAYS=30

# ========== SESSION MANAGEMENT ==========
ADMIN_SESSION_SECRET=f3e8d1c9b7a2f6e4d8c3b1a9f7e2d6c4b8a3f1e9d7c2b6a4f8e3d1c9b7a2f6e4
SESSION_COOKIE_SECURE=false
# Set to true in production with HTTPS

# ========== SERVICE URLS ==========
# Internal Docker network communication
NLP_SERVICE_URL=http://nlp:8001
VISION_SERVICE_URL=http://vision:8002
API_BASE_URL=http://api:8000

# Service configuration
NLP_BASE_URL=http://nlp:8001
VISION_BASE_URL=http://vision:8002

# ========== MEDIA STORAGE ==========
MEDIA_ROOT=/data/media
MAX_UPLOAD_SIZE_MB=10
ALLOWED_IMAGE_FORMATS=jpg,jpeg,png,webp

# ========== CORS CONFIGURATION ==========
# Add your frontend URLs here
CORS_ORIGINS=http://localhost:5173,http://localhost:3000,http://localhost:3001,http://localhost:8000
CORS_ALLOWED_ORIGINS=http://localhost:5173,http://localhost:3000,http://localhost:3001,http://localhost:8000

# ========== MATCHING ALGORITHM ==========
# Multi-modal weights (must sum to 1.0)
MATCH_WEIGHT_TEXT=0.45
MATCH_WEIGHT_IMAGE=0.35
MATCH_WEIGHT_GEO=0.15
MATCH_WEIGHT_TIME=0.05
MATCH_WEIGHT_COLOR=0.00

# Matching thresholds
MATCH_MIN_SCORE=0.65
MATCH_GEO_RADIUS_KM=5.0
MATCH_TIME_WINDOW_DAYS=30

# ========== RATE LIMITING ==========
RATE_LIMIT_ENABLED=true
RATE_LOGIN_PER_MIN=10
RATE_UPLOAD_PER_MIN=20
RATE_LIMIT_AUTH=10/minute
RATE_LIMIT_UPLOAD=20/minute
RATE_LIMIT_SEARCH=100/minute

# ========== MONITORING ==========
# Grafana
GRAFANA_ADMIN_USER=admin
GRAFANA_ADMIN_PASSWORD=admin
GRAFANA_PORT=3000

# Prometheus
PROMETHEUS_RETENTION=15d
PROMETHEUS_PORT=9090

# Loki
LOKI_RETENTION=30d
LOKI_PORT=3100

# ========== EXTERNAL SERVICES (Optional) ==========
# Google Translate
GOOGLE_TRANSLATE_KEY=

# Email notifications (SMTP)
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_USER=
SMTP_PASSWORD=
SMTP_FROM=noreply@lostfound.com

# SMS notifications (Twilio)
TWILIO_ACCOUNT_SID=
TWILIO_AUTH_TOKEN=
TWILIO_PHONE_NUMBER=

# ========== FEATURE FLAGS ==========
FEATURE_AUTO_MATCHING=true
FEATURE_EMAIL_NOTIFICATIONS=false
FEATURE_SMS_NOTIFICATIONS=false
FEATURE_MULTILINGUAL=true

# ========== LOGGING ==========
LOG_LEVEL=INFO
DEBUG=false

# ========== NLP SERVICE CONFIGURATION ==========
NLP_MODEL=sentence-transformers/all-MiniLM-L6-v2
NLP_EMBEDDING_DIM=384
USE_GPU_NLP=false

# ========== VISION SERVICE CONFIGURATION ==========
VISION_MODEL=openai/clip-vit-base-patch32
VISION_EMBEDDING_DIM=512
USE_GPU_VISION=false
YOLO_MODEL=yolov8n.pt

# ========== DOCKER CONFIGURATION ==========
# Container versions
API_VERSION=latest
NLP_VERSION=latest
VISION_VERSION=latest

# Volume names
DB_VOLUME=lost-found-db-data
MEDIA_VOLUME=lost-found-media
REDIS_VOLUME=lost-found-redis-data

