<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <title>Flagged Items â€“ Lost &amp; Found Admin</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap" rel="stylesheet" />
    <style>
      body { font-family: 'Inter', sans-serif; margin: 24px; background: #f6f7fb; color: #1f2430; }
      h1 { font-size: 26px; margin-bottom: 20px; }
      .card { background: #fff; border-radius: 16px; padding: 20px; box-shadow: 0 8px 28px rgba(36, 64, 117, 0.12); margin-bottom: 20px; }
      .flags { margin-top: 12px; }
      .flag { border-left: 4px solid #e53935; padding-left: 12px; margin-bottom: 12px; }
      .flag small { color: #7c8797; }
      button { border: none; border-radius: 12px; padding: 10px 18px; color: #fff; background: #0f3e5a; cursor: pointer; margin-right: 8px; }
      button.secondary { background: #7c8797; }
      button.danger { background: #d32f2f; }
      .actions { margin-top: 16px; }
      .empty { text-align: center; padding: 40px; color: #8c96a4; }
      form { display: inline; }
    </style>
  </head>
  <body>
    <h1>Flagged Items</h1>
    {% if not flagged %}
      <div class="empty">No open flags ðŸŽ‰</div>
    {% endif %}
    {% for entry in flagged %}
      <div class="card">
        <h2>{{ entry.item.title }} <small style="color:#7c8797; font-size:14px;">#{{ entry.item.id }}</small></h2>
        <p>Status: <strong>{{ entry.item.status }}</strong></p>
        <div class="flags">
          {% for flag in entry.flags %}
            <div class="flag">
              <p>{{ flag.reason }}</p>
              <small>Source: {{ flag.source }} â€¢ Flag #{{ flag.id }} â€¢ {{ flag.created_at }}</small>
            </div>
          {% endfor %}
        </div>
        <div class="actions">
          <form method="post" action="/admin/items/{{ entry.item.id }}/action">
            <input type="hidden" name="action" value="resolve" />
            <button class="danger">Resolve</button>
          </form>
          <form method="post" action="/admin/items/{{ entry.item.id }}/action">
            <input type="hidden" name="action" value="feature" />
            <button>Feature</button>
          </form>
          <form method="post" action="/admin/items/{{ entry.item.id }}/action">
            <input type="hidden" name="action" value="dismiss" />
            <button class="secondary">Dismiss</button>
          </form>
        </div>
      </div>
    {% endfor %}
  </body>
</html>
