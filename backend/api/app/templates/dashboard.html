<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <title>Lost &amp; Found – Admin Dashboard</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet" />
    <style>
      body { font-family: 'Inter', sans-serif; margin: 24px; background: #f4f7fb; color: #1f2430; }
      h1 { font-size: 28px; margin-bottom: 16px; }
      .grid { display: grid; gap: 16px; grid-template-columns: repeat(auto-fill, minmax(220px, 1fr)); margin-bottom: 32px; }
      .card { background: #fff; border-radius: 16px; padding: 20px; box-shadow: 0 10px 28px rgba(15, 62, 90, 0.08); }
      .metric { font-size: 14px; color: #7c8797; text-transform: uppercase; letter-spacing: 0.12em; margin-bottom: 6px; }
      .value { font-size: 28px; font-weight: 700; }
      table { width: 100%; border-collapse: collapse; }
      th, td { padding: 12px 16px; text-align: left; }
      th { text-transform: uppercase; font-size: 12px; color: #7c8797; border-bottom: 1px solid #e3e9f3; }
      tr:nth-child(even) { background: #f8fafd; }
      .chip { display: inline-block; padding: 4px 10px; background: #0f3e5a; color: #fff; border-radius: 999px; font-size: 12px; }
    </style>
  </head>
  <body>
    <h1>Admin Dashboard</h1>
    <div class="grid">
      <div class="card">
        <div class="metric">Users</div>
        <div class="value">{{ stats.users }}</div>
      </div>
      <div class="card">
        <div class="metric">Items</div>
        <div class="value">{{ stats.items }}</div>
      </div>
      <div class="card">
        <div class="metric">Resolved</div>
        <div class="value">{{ stats.resolved_items }}</div>
        <div class="metric">Rate {{ '{:.0%}'.format(stats.resolution_rate) }}</div>
      </div>
      <div class="card">
        <div class="metric">Open Flags</div>
        <div class="value">{{ stats.open_flags }}</div>
      </div>
      <div class="card">
        <div class="metric">Avg Match Score</div>
        <div class="value">{{ stats.average_match_score if stats.average_match_score is not none else '—' }}</div>
      </div>
      <div class="card">
        <div class="metric">Match Latency (s)</div>
        <div class="value">{{ '%.1f' % stats.average_match_latency_seconds if stats.average_match_latency_seconds is not none else '—' }}</div>
      </div>
    </div>

    <div class="card">
      <h2>Items by Category</h2>
      {% if stats.items_by_category %}
      <table>
        <thead>
          <tr>
            <th>Category</th>
            <th>Total</th>
          </tr>
        </thead>
        <tbody>
          {% for row in stats.items_by_category %}
          <tr>
            <td>{{ row.category or 'Unspecified' }}</td>
            <td>{{ row.total }}</td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
      {% else %}
      <p>No item categories recorded yet.</p>
      {% endif %}
    </div>

    <p style="margin-top:32px; color:#7c8797; font-size: 13px;">Powered by Lost &amp; Found Admin.</p>
  </body>
</html>
